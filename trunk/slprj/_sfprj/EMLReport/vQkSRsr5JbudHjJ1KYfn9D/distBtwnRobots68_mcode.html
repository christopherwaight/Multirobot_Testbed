<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="30,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T31U3">W</span>] = distBtwnRobots(<span class="var type1" id="S3T2U6">NRobot</span>,<span class="var type1" id="S4T1U7">RobotParams</span>,<span class="var type2" id="S5T4V1U8">SimParams</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="30,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T2:U5"><span class="var type1" id="S6T2U11">N</span> = <span class="mxinfo " id="T2:U7">floor(<span class="mxinfo " id="T6:U8">length(<span class="var type1" id="S4T1U17">RobotParams</span>)</span>/4)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T31:U10"><span class="var type1" id="S2T31U21">W</span> = <span class="mxinfo " id="T31:U12">zeros(<span class="mxinfo " id="T2:U13">2</span>,<span class="mxinfo " id="T2:U14">2*<span class="var type1" id="S6T2U27">N</span></span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T9:U16"><span class="var type1" id="S10T9U30">xs</span> = <span class="mxinfo " id="T9:U18">zeros(<span class="mxinfo " id="T2:U19">1</span>,<span class="var type1" id="S6T2U34">N</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T9:U21"><span class="var type1" id="S11T9U37">ys</span> = <span class="mxinfo " id="T9:U23">zeros(<span class="mxinfo " id="T2:U24">1</span>,<span class="var type1" id="S6T2U41">N</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T9:U26"><span class="var type1" id="S12T9U44">ds</span> = <span class="mxinfo " id="T9:U28">zeros(<span class="mxinfo " id="T2:U29">1</span>,<span class="var type1" id="S6T2U48">N</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,7" id="srcline7"> 7</a></span><span class="line"><span class="var type0" id="S13T0U51">DL</span> = <span class="var type1" id="S5T4U53">SimParams</span>(<span class="mxinfo " id="T2:U32"><span class="message error" id="M8F68C">1</span></span>); </span></span>
<span class="srcline"><span class="lineno"><a href="30,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T9:U33"><span class="mxinfo " id="T9:U34"><span class="var type1" id="S10T9U58">xs</span>(1:<span class="var type1" id="S6T2U61">N</span>)</span> = <span class="mxinfo " id="T9:U37"><span class="var type1" id="S4T1U63">RobotParams</span>(1:4:end)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T9:U39"><span class="mxinfo " id="T9:U40"><span class="var type1" id="S11T9U73">ys</span>(1:<span class="var type1" id="S6T2U76">N</span>)</span> = <span class="mxinfo " id="T9:U43"><span class="var type1" id="S4T1U78">RobotParams</span>(2:4:end)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T9:U45"><span class="mxinfo " id="T9:U46"><span class="var type1" id="S12T9U88">ds</span>(1:<span class="var type1" id="S6T2U91">N</span>)</span> = <span class="mxinfo " id="T9:U49">sqrt(<span class="mxinfo " id="T9:U50"><span class="mxinfo " id="T9:U51">(<span class="mxinfo " id="T9:U52"><span class="var type1" id="S10T9U98">xs</span>-<span class="mxinfo " id="T2:U54"><span class="var type1" id="S10T9U100">xs</span>(<span class="var type1" id="S3T2U101">NRobot</span>)</span></span>).^2</span> + <span class="mxinfo " id="T9:U57">(<span class="mxinfo " id="T9:U58"><span class="var type1" id="S11T9U106">ys</span>-<span class="mxinfo " id="T2:U60"><span class="var type1" id="S11T9U108">ys</span>(<span class="var type1" id="S3T2U109">NRobot</span>)</span></span>).^2</span></span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,11" id="srcline11">11</a></span><span class="line"><span class="comment">%find closest single neighbors</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T2:U63"><span class="mxinfo " id="T2:U64"><span class="var type1" id="S12T9U114">ds</span>(<span class="var type1" id="S3T2U115">NRobot</span>)</span> = <span class="mxinfo " id="T2:U67">nan</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,13" id="srcline13">13</a></span><span class="line">[<span class="mxinfo " id="T2:U68">~</span>,<span class="var type1" id="S17T2U122">idx</span>] = min(<span class="var type1" id="S12T9U125">ds</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="30,14" id="srcline14">14</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,15" id="srcline15">15</a></span><span class="line"><span class="comment">%[~,idx] = mink(ds,2); </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T9:U71"><span class="var type1" id="S19T9U128">w</span> = <span class="mxinfo " id="T9:U73">zeros(<span class="mxinfo " id="T2:U74">1</span>,<span class="var type1" id="S6T2U132">N</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T2:U76"><span class="mxinfo " id="T2:U77"><span class="var type1" id="S19T9U136">w</span>(<span class="var type1" id="S17T2U137">idx</span>)</span> = <span class="mxinfo " id="T2:U80"><span class="var type1" id="S12T9U139">ds</span>(<span class="var type1" id="S17T2U140">idx</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,18" id="srcline18">18</a></span><span class="line"><span class="var type1" id="S19T9U144">w</span>(<span class="var type1" id="S12T9U146">ds</span>&gt;<span class="var type0" id="S13T0U147"><span class="message error" id="M9F68C">DL</span></span>) = <span class="mxinfo " id="T2:U85">0</span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T9:U86"><span class="mxinfo " id="T9:U87"><span class="var type1" id="S2T31U152">W</span>(<span class="mxinfo " id="T2:U89">1</span>,<span class="mxinfo " id="T9:U90"><span class="mxinfo " id="T2:U91">1</span>:<span class="mxinfo " id="T2:U92">2</span>:<span class="mxinfo " id="T2:U93">2*<span class="var type1" id="S6T2U160">N</span></span></span>)</span> = <span class="var type1" id="S19T9U161">w</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T9:U96"><span class="mxinfo " id="T9:U97"><span class="var type1" id="S2T31U165">W</span>(<span class="mxinfo " id="T2:U99">2</span>,<span class="mxinfo " id="T9:U100"><span class="mxinfo " id="T2:U101">2</span>:<span class="mxinfo " id="T2:U102">2</span>:<span class="mxinfo " id="T2:U103">2*<span class="var type1" id="S6T2U173">N</span></span></span>)</span> = <span class="var type1" id="S19T9U174">w</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="30,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,24" id="srcline24">24</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,25" id="srcline25">25</a></span><span class="line"><span class="comment">% N = floor(length(RobotParams)/4);</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,26" id="srcline26">26</a></span><span class="line"><span class="comment">% W = zeros(2,2*N); </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,27" id="srcline27">27</a></span><span class="line"><span class="comment">% xs = zeros(1,N); </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,28" id="srcline28">28</a></span><span class="line"><span class="comment">% ys = zeros(1,N);</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,29" id="srcline29">29</a></span><span class="line"><span class="comment">% ds = zeros(1,N); </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,30" id="srcline30">30</a></span><span class="line"><span class="comment">% Distance = zeros(1,N);  </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,31" id="srcline31">31</a></span><span class="line"><span class="comment">% xs(1:N) = RobotParams(1:4:end); </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,32" id="srcline32">32</a></span><span class="line"><span class="comment">% ys(1:N) = RobotParams(2:4:end); </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,33" id="srcline33">33</a></span><span class="line"><span class="comment">% ds(1:N) = sqrt((xs-xs(NRobot)).^2 + (ys-ys(NRobot)).^2); </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,34" id="srcline34">34</a></span><span class="line"><span class="comment">% Distance(1:N) = distances(NRobot,:)'; </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,35" id="srcline35">35</a></span><span class="line"><span class="comment">% [~,I] = sort(ds);</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,36" id="srcline36">36</a></span><span class="line"><span class="comment">% [~,I2] = sort(Distance);</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,37" id="srcline37">37</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="30,38" id="srcline38">38</a></span><span class="line"><span class="comment">% W(1,1:2:2*N) = ds - Distance(I2(I));</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,39" id="srcline39">39</a></span><span class="line"><span class="comment">% W(2,2:2:2*N) = ds - Distance(I2(I));</span></span></span>
</pre>
